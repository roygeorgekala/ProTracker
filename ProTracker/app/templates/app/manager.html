{% load static %}

<!DOCTYPE html>
<html lang="en" dir="ltr">

<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" href="{% static 'css/manager.css' %}">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"> -->
   <link rel="stylesheet" href="{% static 'css/main.css' %}">


  <link src="https://code.jquery.com/jquery-3.5.1.min.js"></link>
  <link src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></link>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>


  <title>ProTracker</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Navbar</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="{% static 'css/home.css' %}">

</head>
<body>
<header>
            <a class="logo" href="/"><img width="250px" height="60px" src="{% static 'media/header.png' %}" alt="logo"></a>
            <a class="cta" href="/login">Logout</a>
            <p class="menu cta">Menu</p>
        </header>
        <script type="text/javascript" src="{% static 'js/header.js' %}"></script>
</br>
</br>


</br>
<br>
  <div class="col-md-12 text-center">

  <h3>Welcome Back, {{full_name}}!</h3>
  <br>
  <br>

</div>
 {% for emp in names %}
<div>
  <ul>

    <div class="modal fade" id="modal-{{emp.username}}" tabindex="-1" role="dialog" aria-labelledby="TaskModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <h3 class="modal-title mx-auto">All Recent Tasks assigned to {{emp.name}}</h3>
          <div class="modal-body"  >
            <div class="row">
            <div class="col-6">
              <h5>Assigned Tasks</h5>
              <div class="todo-list" id="active-tasks-{{emp.username}}">
              <div class="todo-item">
                <span>loading</span>
              </div>
            </div>



            </div>
            <div class="col-6">
              <h5>Completed Tasks</h5>
              <div class="todo-list" id="completed-tasks-{{emp.username}}">
              <div class="todo-item">
                <span>loading</span>
              </div>
            </div>



            </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>


    <div class="container">
    <div class="row ng-scope">
        <div class="col-md-12 col-md-pull-3">

            <section class="search-result-item">
                {% if emp.profile_pic %}
                <a class="image-link"><img class="image" src="{{emp.profile_pic.url}}">

                {% else %}
                <a class="image-link"><img class="image" src="{% static 'media/default.jpg' %}">

                {% endif %}
                </a>
{% load static %}
                <div class="search-result-item-body">
                    <div class="row">
                        <div class="col-sm-9">
                            <h4 class="search-result-item-heading">{{emp.name}}</h4>
                            <p class="info">Role: {{emp.role}}</p>
                            <p class="info">Username: {{emp.username}}</p>
                            <p class="info">Skills: {{emp.skills}}</p>



                        </div>
                        <div class="col-sm-3 text-align-center">
                          <button type="button" class="btn btn-primary" onclick="viewTasks('{{emp.username}}')">View Tasks</button>
                          <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModalCenter" onclick="empname('{{emp.username}}')">
                Assign
              </button>


<!-- Modal -->
<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
<div class="modal-dialog modal-dialog-centered" role="document">
<div class="modal-content">
  <div class="modal-header">
    <h5 class="modal-title" id="exampleModalCenterTitle">Add a new Task</h5>
    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>

  <div class="modal-body">
    <div class="card-body">
        <form >

            {% csrf_token %}
            <input  type="text" id='task' name="taskassign" class="form-control add-task"  placeholder="New Task..." required>
            <br>
            
            <div class=checkb>
              <input type="checkbox" id="urgent" name="urgent">
              <label for="scales">URGENT</label>

            </div>
    </div>
  </div>









  <div class="modal-footer">
    <button type="button" onclick="submitTasks()" class="btn btn-primary" data-dismiss="modal">Assign</button>


    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
    </div>

</form>
</div>
</div>
</div>
</div>
</div>
    </div>

       </div>
  </div>
 </section>

</div>
</div>
</div>


   </div>
    {% endfor %}
        </ul>

     <script src="{% static 'js/manager.js' %}"></script>
      </body>
</html>